---
title: 题库开发过程中的选择
date: 2016-07-24 12:33:15
tags: [题库]
category: 程序
---
### 困难
本次开发题库是对特定的对象，即数学这方面，而这方面有几个必须要解决的问题，一是公式问题，这个已经解决，第二个就是图片问题，这个本身就存在着如何选择去解决的问题。
<!-- more -->

说说思路吧，最开始是选择用 markdown 的方式，但是在 markdown 里插入图片无法自定义大小与位置，好在 markdown 支持 html 的 `<img />` 标签，这就为自定义位置和大小提供了便利，完成这步后，就将字串直接存入数据库中了，然后当导出至 msword 中时，将该字串取出，转换成相应的格式写入 msword 中。在解析这个字串时，需要将 `<img />` 标签解析出其文件名、宽、高以及排列方式等，然后需要将该部分替换掉，解析的方式可以用 BeautifulSoup4 来执行，但是在替换时遇到了困难，因为最开始写入的 img 字串与解析出来的字串有出入，在如何替换这部分时产生了一个想法：即想将图片直接嵌入 qtextedit 控件中，这个想法本身是为了避免用户在输入字串时破坏了 img 特定的符合 BeautifulSoup4 的格式，可是在解决的过程中，遇到一些问题，即对于 QTextEdit 中的 image 块的鼠标定位以及要添加 ContextMenu 等等一系列的问题，在思考了两天后，决定改变这种想法，还是采用最初的决定，即向用户提供一个输入和直接修改 img 标签属性的方式。

### 选择
那么为什么要这样选择呢？回顾自己开发的过程，发现当遇到替换 img 标签这个小问题时，引入了一个大问题，当然可以解决，但是工程量就上去了，同时也违背了最初的本意。最初的想法即是用数据库来存储相关的markdown 语法，仅此而已，同时在界面上也提供了对 markdown 编辑器的实时预览，那么在这种情况下，有什么必要要在一个 editor 中再去提供所见即所得的功能呢？

所以，从这个小小的选择来看，大的方向还是不能变的，否则解决问题的性质就发生了变化，不但增加了工作量，而且还会违背最初的选择。当然如果实在是有必要更改，那当然是需要的，但是目前看来，这种更改不但没有必要，而且上走了弯道。

### 思考
在开发过程中，当然会免不了有各种问题，但是如何取舍是要做出很重要的选择的，项目的拖延往往是焦点过于转移于去解决与主题相关不大的问题上面，从而产生了很多不确定的因素，其实首先要解决的是主版本的发布日期，然后再根据使用情况做出迭代，过早进行重构，对于程序来讲是很要命的。

这次选择，又让自己明白了很多，细节固然重要，但是在整体还未完成时，过早否定一种方案并不理智，只有先将这种方案实现后，再来评估其对于系统的影响，这才是正确的思路。

**版权所有，欢迎转载，转载请注明出处**。
